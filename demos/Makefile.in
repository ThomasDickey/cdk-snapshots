#
# Makefile for the examples directory.
#
SHELL		= /bin/sh

CC		= @CC@

LIBS		= -lcdk @LIBS@

CFLAGS		= @CFLAGS@
EXTRA_CFLAGS	= @EXTRA_CFLAGS@
CPPFLAGS	= @DEFS@ @CPPFLAGS@ -I../include -I.. -I. 

LIBDIR		= -L.. @LDFLAGS@
BINS		= fileview rolodex command clock stopSign \
		appointment serial vinstall

#
# If you have Sybase installed on your system, try making
# syb. It's a full screen interface to Sybase.
#
SYBROOT		= $(SYBASE)
SYBINCDIR	= -I$(SYBROOT)/include
SYBLIBDIR	= -L$(SYBROOT)/devlib
SYBLIBS		= -lnsl -lsybdb

all : $(BINS)

#
# Standard .c to .o compile line.
#
.c.o:
@RULE_CC@
	@ECHO_CC@$(CC) $(CFLAGS) $(EXTRA_CFLAGS) $(CPPFLAGS) -c $<
#
# Most of the examples are built from a single .c file using the same libraries
#
LINKIT	= @ECHO_LD@$(CC) $(CFLAGS) $(EXTRA_CFLAGS) $(CPPFLAGS) $< -o $@ $(LIBDIR) $(LIBS)

# fileview    - Basic file selector/file viewer combination.
fileview:	fileview.o	; $(LINKIT)

# rolodex     - A fairly robust rolodex.
rolodex:	rolodex.o	; $(LINKIT)

# command     - A basic command interface with command history.
command:	command.o	; $(LINKIT)

# clock       - A simple little clock.
clock:		clock.o	; $(LINKIT)

# stopSign    - A simple demo I wrote after a couple of pints. :)
stopSign:	stopSign.o	; $(LINKIT)

# appointment - A basic appointment book/date keeper.
appointment:	appointment.o	; $(LINKIT)

# serial      - This probes the serial port.
serial:		serial.o	; $(LINKIT)

# keycheck    - This prints out the keys ASCII and Octal values.
keycheck:	keycheck.o	; $(LINKIT)

# vinstall    - CDK based installer.
vinstall:	vinstall.o	; $(LINKIT)

#
# A Sybase interface.
#
syb:	syb.c
	$(CC) $(CFLAGS) -o $@ $? $(CPPFLAGS) $(SYBINCDIR) $(LIBDIR) $(SYBLIBDIR) $(LIBS) $(SYBLIBS)

#
# Standard clean directives.
#
clean::
	-rm -f core *.o $(BINS)
distclean::	clean
	-rm -f Makefile
